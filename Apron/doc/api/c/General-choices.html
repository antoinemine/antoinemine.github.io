<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>General choices (APRON 0.9.15)</title>

<meta name="description" content="General choices (APRON 0.9.15)">
<meta name="keywords" content="General choices (APRON 0.9.15)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="APRON-Rationale-and-Functionalities.html" rel="up" title="APRON Rationale and Functionalities">
<link href="Functionalities-of-the-interface-at-level-0.html#Functionalities-of-the-interface-at-level-0" rel="next" title="Functionalities of the interface at level 0">
<link href="APRON-Rationale-and-Functionalities.html" rel="prev" title="APRON Rationale and Functionalities">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="General-choices">
<div class="nav-panel">
<p>
Next: <a href="Functionalities-of-the-interface-at-level-0.html#Functionalities-of-the-interface-at-level-0" accesskey="n" rel="next">Functionalities of the interface at level 0</a>, Previous: <a href="APRON-Rationale-and-Functionalities.html" accesskey="p" rel="prev">APRON Rationale and Functionalities</a>, Up: <a href="APRON-Rationale-and-Functionalities.html" accesskey="u" rel="up">APRON Rationale and Functionalities</a> &nbsp; </p>
</div>
<h3 class="section" id="General-choices-1"><span>General choices<a class="copiable-link" href="#General-choices-1"> &para;</a></span></h3>


<hr>
<a class="node" id="Interface-levels"></a><div class="nav-panel">
<p>
Next: <a href="#Programming-language" accesskey="n" rel="next">Programming language</a>, Previous: <a href="#General-choices" accesskey="p" rel="prev">General choices</a>, Up: <a href="#General-choices" accesskey="u" rel="up">General choices</a> &nbsp; </p>
</div>
<h4 class="subsubheading" id="Interface-levels-1"><span>Interface levels<a class="copiable-link" href="#Interface-levels-1"> &para;</a></span></h4>

<p>There are two main goals for the APRON interface: efficiency of the
implementations, and ease of use for the user. In addition, code
duplication between libraries should be avoided. As a consequence, two
levels were identified:
</p><dl class="table">
<dt><em class="emph">Level 0</em></dt>
<dd><p>Choices are guided by the efficiency and the precision of the operations;
</p></dd>
<dt><em class="emph">Level 1</em></dt>
<dd><p>Choices are guided by ease of use, and code factorization.
</p></dd>
</dl>

<p>The level 0 is directly connected to the underlying (existing)
library. It includes all the operations that are specific to an
abstract domain and whose code cannot be shared. The interface should
be minimal, <em class="emph">unless</em> there is a strong algorithmical advantage to
include a combination of more basic operations.
</p>
<p>The higher levels offers additional functionalities that are shared by
all the library connected to the level 0. For instance:
</p>
<ul class="itemize mark-bullet">
<li>managing correspondance between numerical dimensions and names
(characters strings or more generally references);
</li><li>abstraction of non linear expressions in interval linear expressions;
</li><li>automatic call to redimensioning and permutation operations for
computing
P(x,y)/\Q(y,z).
</li></ul>

<p>Combination of abstract domain is possible at the level 0. One can
implement for instance the cartesian or reduced product of two
different abstract domains, the decomposition of abstract values into
a product of values of smaller dimensionality, ...
</p>
<hr>
<a class="node" id="Programming-language"></a><div class="nav-panel">
<p>
Next: <a href="#Compatibility-with-threads" accesskey="n" rel="next">Compatibility with threads</a>, Previous: <a href="#Interface-levels" accesskey="p" rel="prev">Interface levels</a>, Up: <a href="#General-choices" accesskey="u" rel="up">General choices</a> &nbsp; </p>
</div>
<h4 class="subsubheading" id="Programming-language-1"><span>Programming language<a class="copiable-link" href="#Programming-language-1"> &para;</a></span></h4>

<p>The reference version of the interface is the C version of the interface:
</p>
<ul class="itemize mark-bullet">
<li>C can be easily interfaced with most programming languages;
</li><li>Most of the existing libraries implementing abstract domains for
numerical variables are programmed in C or C++.
</li></ul>

<p>An <small class="sc">OCAML</small> version is already available. The interface between
OCaml and C is even generic and any libraries can benefit from it by
just providing the glue for the function creating a manager.
</p>
<hr>
<a class="node" id="Compatibility-with-threads"></a><div class="nav-panel">
<p>
Next: <a href="#Interruptions" accesskey="n" rel="next">Interruptions</a>, Previous: <a href="#Programming-language" accesskey="p" rel="prev">Programming language</a>, Up: <a href="#General-choices" accesskey="u" rel="up">General choices</a> &nbsp; </p>
</div>
<h4 class="subsubheading" id="Compatibility-with-threads-1"><span>Compatibility with threads<a class="copiable-link" href="#Compatibility-with-threads-1"> &para;</a></span></h4>

<p>In order to ensure compatibility with multithreading programming, a
context is explicitly passed to functions in order to ensure the
following points:
</p>
<ul class="itemize mark-bullet">
<li>the transmission of data specific to each library (non-standard
options, workspace, ...);
</li><li>the transmission of standard options (selection of algorithms and their
precision inside a library);
</li><li>the management of exceptions (implemented as error codes in the C
interface) (<code class="code">not_implemented</code>, <code class="code">invalid_argument</code>,
<code class="code">overflow</code>, <code class="code">timeout</code>, <code class="code">out_of_space</code>).
</li></ul>

<hr>
<a class="node" id="Interruptions"></a><div class="nav-panel">
<p>
Next: <a href="#Memory-management" accesskey="n" rel="next">Memory management</a>, Previous: <a href="#Compatibility-with-threads" accesskey="p" rel="prev">Compatibility with threads</a>, Up: <a href="#General-choices" accesskey="u" rel="up">General choices</a> &nbsp; </p>
</div>
<h4 class="subsubheading" id="Interruptions-1"><span>Interruptions<a class="copiable-link" href="#Interruptions-1"> &para;</a></span></h4>

<p>Interruption mechanisms can have different causes:
</p><dl class="table">
<dt><code class="code">timeout</code></dt>
<dd><p>if the execution time for an operation exceeds some bound;
</p></dd>
<dt><code class="code">out_of_space</code></dt>
<dd><p>if the space consumption for an operation exceeds some bound;
</p></dd>
<dt><code class="code">overflow</code></dt>
<dd><p>if the magnitude or the space usage of manipulated numbers exceeds some bound;
</p></dd>
<dt><code class="code">not_implemented</code></dt>
<dd><p>if the operation is actually not implemented by the underlying library;
</p></dd>
<dt><code class="code">invalid_argument</code></dt>
<dd><p>if the arguments do not follow the requirements of an operation.
</p></dd>
</dl>

<blockquote class="quotation">
<p>For instance, in a convex polyhedra library, the <code class="code">out_of_space</code>
exception allows to abort an operation is the result appears to have
too many constraints and/or generators. If this happens, one can redo
the operation with another (less precise) algorithm. The
<code class="code">overflow</code> may be useful when effective overflows are encountered
with machine integers or when multiprecision rational numbers have too
large numerators and denominators. The <code class="code">not_implemented</code>
exception allows for a library to be linked to the interface even if
it does not provide some operation of the interface.
</p></blockquote>

<p>When an interruption occurs, the function should still return a
correct result, in the abstract interpretation sense: it should be a
correct approximation, usable for next operations in the program. The
top value is always a correct approximation.
</p>
<hr>
<a class="node" id="Memory-management"></a><div class="nav-panel">
<p>
Next: <a href="#Programming-style" accesskey="n" rel="next">Programming style</a>, Previous: <a href="#Interruptions" accesskey="p" rel="prev">Interruptions</a>, Up: <a href="#General-choices" accesskey="u" rel="up">General choices</a> &nbsp; </p>
</div>
<h4 class="subsubheading" id="Memory-management-1"><span>Memory management<a class="copiable-link" href="#Memory-management-1"> &para;</a></span></h4>

<p>Memory is managed differently depending on the programming language. Currently:
</p>
<ul class="itemize mark-bullet">
<li>No automatic garbage collection in the C interface
</li><li>Use of the <small class="sc">OCAML</small> runtime garbage collector in the <small class="sc">OCAML</small> interface
</li></ul>

<hr>
<a class="node" id="Programming-style"></a><div class="nav-panel">
<p>
Next: <a href="#Number-representation" accesskey="n" rel="next">Number representation</a>, Previous: <a href="#Memory-management" accesskey="p" rel="prev">Memory management</a>, Up: <a href="#General-choices" accesskey="u" rel="up">General choices</a> &nbsp; </p>
</div>
<h4 class="subsubheading" id="Programming-style-1"><span>Programming style<a class="copiable-link" href="#Programming-style-1"> &para;</a></span></h4>

<p>Both functional and imperative (i.e., side-effect) signatures are
supported for operations. This allows to optimize the memory
allocation and to use whichever version is more convenient for an user
and the used programming language.
</p>
<hr>
<a class="node" id="Number-representation"></a><div class="nav-panel">
<p>
Previous: <a href="#Programming-style" accesskey="p" rel="prev">Programming style</a>, Up: <a href="#General-choices" accesskey="u" rel="up">General choices</a> &nbsp; </p>
</div>
<h4 class="subsubheading" id="Number-representation-1"><span>Number representation<a class="copiable-link" href="#Number-representation-1"> &para;</a></span></h4>

<p>Inside a specific library, any number representation may be used
(floating-point numbers, machine integers, multiprecision
integers/rationals, ...). Existing libraries often offers the
possibility to select different representations.
</p>
<p>However, in the interface, this representation should be normalized
and independent of underlying libraries, without being restrictive
either. As a consequence, the interface offers the choiced between
</p>
<ul class="itemize mark-bullet">
<li>GMP multiprecision rationals (which implements exact arithmetic);
</li><li>and machine floating-point numbers (<code class="code">double</code>).
</li></ul>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Functionalities-of-the-interface-at-level-0.html#Functionalities-of-the-interface-at-level-0" accesskey="n" rel="next">Functionalities of the interface at level 0</a>, Previous: <a href="APRON-Rationale-and-Functionalities.html" accesskey="p" rel="prev">APRON Rationale and Functionalities</a>, Up: <a href="APRON-Rationale-and-Functionalities.html" accesskey="u" rel="up">APRON Rationale and Functionalities</a> &nbsp; </p>
</div>



</body>
</html>
